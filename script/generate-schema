#!/bin/bash

set -e

echo Generating runner schema
ts-json-schema-generator --path src/index.ts --type RequestInput --out schema/runner.json

echo Generating input schema
ts-json-schema-generator --path src/index.ts --type ModelInput --out schema/input.json

echo Generating output schema
ts-json-schema-generator --path src/index.ts --type ModelOutput --out schema/output.json

echo Generating common input schema
ts-json-schema-generator --path src/index.ts --type CommonModelInput --out schema/input-common.json
wetzel schema/input-common.json > docs/input-common.md

echo Generating common output schema
ts-json-schema-generator --path src/index.ts --type CommonModelOutput --out schema/output-common.json
wetzel schema/output-common.json > docs/output-common.md

echo Generating minimal input schema
ts-json-schema-generator --path src/index.ts --type MinimalModelInput --out schema/input-minimal.json
wetzel schema/input-minimal.json > docs/input-minimal.md

echo Generating minimal output schema
ts-json-schema-generator --path src/index.ts --type MinimalModelOutput --out schema/output-minimal.json
wetzel schema/output-minimal.json > docs/output-minimal.md

